name: agentsgen guard + pack check

on:
  pull_request:
  push:
    branches: [ main ]

permissions:
  contents: read
  pull-requests: write

jobs:
  agentsgen:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4

      - name: PR Guard + LLMO Pack drift check
        uses: markoblogo/AGENTS.md_generator/.github/actions/agentsgen-guard@v0.1.2
        with:
          # Optional: post a sticky PR comment with remediation (best-effort)
          comment: true

          # Optional: restrict reporting to these files (guard still runs repo-level checks)
          files: |
            AGENTS.md
            RUNBOOK.md

          # Also validate pack drift (fails if pack is missing/outdated)
          pack_check: true

          # Optional: JSON output for debugging in logs
          pack_format: json
