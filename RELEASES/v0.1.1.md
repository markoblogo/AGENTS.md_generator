# v0.1.1 — GitHub Action PR Guard

## What’s inside

This release adds a reusable GitHub Action that blocks PRs when generated agent docs drift or markers are broken.

### New
- **`agentsgen-guard` composite action** (reusable from any repo)
- **Example workflow** you can copy-paste in minutes
- **Optional PR comment** with remediation steps (best-effort; won’t fail on forks)

### Updated
- Documentation + README now include Action usage pinned to `@v0.1.1`
- Guard output is more actionable: “what’s missing” vs “what needs update”

## Safety model

This guard is intentionally conservative and fork-safe:

- Uses **`agentsgen check`** as the single source of truth
- Never pushes changes. It only **fails the PR** if issues are found
- PR commenting is **optional** and **best-effort**
  - if API permissions are missing (fork PRs, restricted token), it won’t break the run
- Supports `files` input (filtering reported problems) while keeping repo-wide validation correct

## Quickstart

### 1) Add workflow to your repo
Copy the example from:
`.github/workflows/agentsgen-guard.example.yml`

Or add a workflow step like:

```yaml
- name: AGENTS.md Guard
  uses: markoblogo/AGENTS.md_generator/.github/actions/agentsgen-guard@v0.1.1
  with:
    path: .
    comment: true
```

> Tip: set `comment: false` for fork-heavy repos, and keep it purely “fail the check”.

### 2) Fix issues locally when guard fails

Run:

```bash
pipx install agentsgen  # or your preferred install method
agentsgen update
```

If your repo has no markers, the tool will generate `*.generated.*` files instead of overwriting your docs.

## Known limitations

- `files` input filters reporting, but **validation still relies on repo-level checks** (by design).
- PR comments may not appear on fork PRs due to GitHub token permissions.
- If your repo uses a non-standard docs workflow (handwritten `AGENTS.md` without markers), prefer keeping `comment=false` and use generated output as a reference.
